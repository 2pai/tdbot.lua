# tdbot.lua
A simple Lua wrapper for [`telegram-bot`](https://valtman.name/telegram-bot).

See [wiki](https://github.com/rizaumami/tdbot.lua/wiki) for documentation.

## How to Use

- Put tdbot.lua on a same directory level with your bot script
- Import `tdbot.lua` into your bot.
- Call the functions.

See example script below.

```lua
-- Load tdbot library.
tdbot = require 'tdbot'

-- An alias to sendText
function sendText(chat_id, reply_to_message_id, text)
  tdbot.sendText(chat_id, reply_to_message_id, text, 0, 1, nil, 1, 'html', 0, nil)
end

function tdbot_update_callback (data)
  if (data._ == "updateNewMessage") then
    local msg = data.message

    if msg.content._ == "messageText" then
      if msg.content.text == "ping" then
          sendText(chat_id, msg.id, '<b>pong!</b>')
        }, dl_cb, nil))
      end
    end
  end
end

```

## The Functions

`tdbot.lua` is a _Work In Progress_. This commit is based on [telegram-bot-170906-nightly.tl](https://valtman.name/files/telegram-bot-170906-nightly.tl) scheme.
Here is a list of `telegram-bot` methods. Checked functions has been tested and works or returned "ok".

- [x] [getAuthState] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [setAuthPhoneNumber] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [resendAuthCode] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [checkAuthCode] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [checkAuthPassword] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [requestAuthPasswordRecovery] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [recoverAuthPassword] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [resetAuth] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [checkAuthBotToken] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getPasswordState] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [setPassword] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getRecoveryEmail] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [setRecoveryEmail] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [requestPasswordRecovery] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [recoverPassword] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [createTemporaryPassword] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getTemporaryPasswordState] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [processDcUpdate] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getMe] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getUser] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getUserFull] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getGroup] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getGroupFull] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getChannel] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getChannelFull] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getSecretChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getMessage] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getMessages] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getFile] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getFilePersistent] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getChats] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [searchPublicChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [searchPublicChats] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [searchChats] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getTopChats] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteTopChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [addRecentlyFoundChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteRecentlyFoundChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteRecentlyFoundChats] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getCommonChats] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getCreatedPublicChats] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getChatHistory] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteChatHistory] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [searchChatMessages] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [searchMessages] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [searchSecretMessages] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [searchCallMessages] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getPublicMessageLink] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [sendMessage] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [sendBotStartMessage] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [sendInlineQueryResultMessage] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [forwardMessages] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [sendChatSetTtlMessage] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [sendChatScreenshotTakenNotification] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteMessages] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteMessagesFromUser] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [editMessageText] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [editMessageCaption] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [editMessageReplyMarkup] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [editInlineMessageText] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [editInlineMessageCaption] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [editInlineMessageReplyMarkup] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getTextEntities] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getFileMimeType] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getInlineQueryResults] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [answerInlineQuery] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [getCallbackQueryAnswer] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [answerCallbackQuery] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [answerShippingQuery] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [answerPreCheckoutQuery] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [setGameScore] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [setInlineGameScore] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [getGameHighScores] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [getInlineGameHighScores] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [deleteChatReplyMarkup] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [sendChatAction] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [openChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [closeChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [viewMessages] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [openMessageContent] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [createPrivateChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [createGroupChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [createChannelChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [createSecretChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [createNewGroupChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [createNewChannelChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [createNewSecretChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [migrateGroupChatToChannelChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [changeChatTitle] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [changeChatPhoto] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [changeChatDraftMessage] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [toggleChatIsPinned] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [setChatClientData] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [addChatMember] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [addChatMembers] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [changeChatMemberStatus] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getChatMember] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [searchChatMembers] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [setPinnedChats] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [downloadFile] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [cancelDownloadFile] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [uploadFile] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [cancelUploadFile] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [setFileGenerationProgress] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [finishFileGeneration] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteFile] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [exportChatInviteLink] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [checkChatInviteLink] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [importChatInviteLink] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [createCall] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [acceptCall] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [discardCall] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [rateCall] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [debugCall] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [blockUser] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [unblockUser] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getBlockedUsers] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [importContacts] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [searchContacts] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteContacts] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getUserProfilePhotos] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getStickers] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getInstalledStickerSets] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getArchivedStickerSets] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getTrendingStickerSets] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [getAttachedStickerSets] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getStickerSet] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [searchStickerSet] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [changeStickerSet] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [viewTrendingStickerSets] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [reorderInstalledStickerSets] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getRecentStickers] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [addRecentSticker] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteRecentSticker] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [clearRecentStickers] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getStickerEmojis] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getSavedAnimations] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [addSavedAnimation] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteSavedAnimation] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getRecentInlineBots] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [searchHashtags] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteRecentHashtag] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getWebPagePreview] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getWebPageInstantView] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getNotificationSettings] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [setNotificationSettings] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [resetAllNotificationSettings] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [setProfilePhoto] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteProfilePhoto] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [changeName] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [changeAbout] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [changeUsername] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [changePhoneNumber] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [resendChangePhoneNumberCode] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [checkChangePhoneNumberCode] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getActiveSessions] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [terminateSession] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [terminateAllOtherSessions] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [toggleGroupAdministrators] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [changeChannelUsername] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [toggleChannelInvites] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [toggleChannelSignMessages] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [changeChannelDescription] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [pinChannelMessage] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [unpinChannelMessage] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [reportChannelSpam] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getChannelMembers] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteChannel] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [closeSecretChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getChatEventLog] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [getPaymentForm] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [validateOrderInfo] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [sendPaymentForm] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [getPaymentReceipt] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getSavedOrderInfo] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteSavedOrderInfo] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [deleteSavedCredentials] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getSupportUser] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getWallpapers] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [registerDevice] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [setPrivacy] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getPrivacy] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getOption] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [setOption] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [changeAccountTtl] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getAccountTtl] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [deleteAccount] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getChatReportSpamState] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [changeChatReportSpamState] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [reportChat] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getStorageStatistics] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getStorageStatisticsFast] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [optimizeStorage] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [setNetworkType] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getNetworkStatistics] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [addNetworkStatistics] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [resetNetworkStatistics] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [setBotUpdatesStatus] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [uploadStickerFile] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [createNewStickerSet] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [addStickerToSet] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [setStickerPositionInSet] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [deleteStickerFromSet] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [sendCustomRequest] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [answerCustomQuery] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [setAlarm] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getInviteText] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getTermsOfService] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [ ] [setProxy] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [getProxy] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [testCallEmpty] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [testCallString] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [testCallBytes] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [testCallVectorInt] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [testCallVectorIntObject] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [testCallVectorString] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [testCallVectorStringObject] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [testSquareInt] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [testNetwork] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [testGetDifference] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [testUseUpdate] (https://github.com/rizaumami/tdbot.lua/wiki/)
- [x] [testUseError] (https://github.com/rizaumami/tdbot.lua/wiki/)
